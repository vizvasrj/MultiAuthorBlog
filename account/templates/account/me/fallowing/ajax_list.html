{% load blog_tags %}
{% load thumbnail %}
{% load blog_tags %}



{% for post in posts %}
{% thumbnail post.author.photo 30x30 crop as avatar %}


<div class="d-flex flex-row">
    <div class="py-2 d-flex justify-content-start">
        <a href="/{{post.author.get_absolute_url}}/">
            <img class="top-me rounded-pill border border-3" src="{{ avatar.url }}" alt="">
        </a>

    </div>
    <div class="container" style="margin-left: -24px; margin-top: -2px;">
        <div class="row">
            <div class="col-sm-6  flex-fill">
                <div class="d-flex flex-column">
                    <div class="p-2 ">
                        <a class="author_name_from_list" href="/{{post.author.get_absolute_url}}/">
                            <strong class="">
                                <span class="at">@</span>
                                {{ post.author.user }}
                            </strong>
                        </a>
                        {% if post.publication %}
                        <span class="in">in </span>
                            <span class="publication mx-1"> {{post.publication}}</span>
        
                        {% else %}
                        {% endif %}
                        <!-- <span>Other some</span> -->
                    </div>
                    <div class="p-2 tags__home" >
        
                        {% for tag in post.tags.all %}
                        <div  style="display: inline-block;">
                            <a class="author_name_from_list" href="{{tag.get_absolute_url}}"><span class="hash">#</span>{{ tag }}</a>
                        </div>
                        {% endfor %}
        
                    </div>
                </div>
            </div>
            <div class="col-sm-6 p-2 d-flex justify-content-end">{{ post.publish }}</div>
        </div>
    </div>
</div>
<div class="others">
    {% for other in post.other_author.all %}
    {% thumbnail other.profiles.photo 30x30 crop as other_photo %}
        <a href="/{{other.get_absolute_url}}/">
            <img class="top-me rounded-pill border border-3" src="{{ other_photo.url }}" alt="">
        </a>
        <a href="/{{other.get_absolute_url}}/">
            <strong class="">
                <span class="at">@</span>
                {{ other }}
            </strong>
        </a>
    {% endfor %}

</div>


<!-- <div class="row">
    <div class="col-1">
        <img class="rounded-pill" src="{{ avatar.url }}" alt="">
    </div>
    <div class="col-5 line-height">
        <div class="col-12">
            <a href="/{{post.author.get_absolute_url}}/">
                <strong class="">
                    <span class="at">@</span>
                    {{ post.author.user }}
                </strong>
            </a>
        </div>
        <div class="col-12">
            {% for tag in post.tags.all %}
            
            <span>
                <a href="/tag/{{tag}}"><span class="hash">#</span>{{ tag }}</a>
            </span>
            {% endfor %}
        </div>
    </div>
    <div class="col-6 ">
        <div class="d-flex flex-fill justify-content-end">{{ post.publish }}</div>
    </div>
</div> -->

<a class="h1-title" href="{{post.get_absolute_url}}">
    <h1 class="h1-title">{{post.title}}</h1>
</a>
{% if post.cover %}

{% thumbnail post.cover 735x300 crop as cover %}

<a href="{{ post.get_absolute_url }}">
    <img width="100%" src="{{ cover.url }}" alt="">
</a>

{% else %}

{% endif %}


<p class="word-break">{{post.body|paragraph|truncatechars_html:500}}</p>
<div class="d-flex flex-row">
    <p class="flex-fill">{{ post.total_likes }} like{{ post.total_likes|pluralize }}</p>
    <div class="bookmark" style="font-size: x-large;">
        {% with bookmark=post.bookmark_list.all %}

        {% if user.is_authenticated %}
        
        <a data-id="{{ post.id }}" data-action="{% if request.user in bookmark %}un{% endif %}bookmark" class="bookmark">
            <svg class="changesize2" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em" height="1em" style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24">
                <path class="{% if request.user in bookmark %}king{% endif %} {{ post.id }} icad" d="M17 3H7a2 2 0 0 0-2 2v16l7-3l7 3V5a2 2 0 0 0-2-2z" fill="#626262"/>
            </svg>
          </a>

        {% else %}

        <a href="{% url 'login' %}?next={{ request.path }}" class="bookmark_unauthenticated">
            <svg class="changesize2" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em" height="1em" style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24">
                <path class="icad" d="M17 3H7a2 2 0 0 0-2 2v16l7-3l7 3V5a2 2 0 0 0-2-2z" fill="#626262"/>
            </svg>
        </a>

        {% endif %}


        {% endwith %}
      </div>
</div>
<hr>




{% endfor %}