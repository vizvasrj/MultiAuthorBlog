{% extends "blog_base.html" %}
{% load static %}
{% load crispy_forms_tags %}
{% load editorjs %}

{% block head %} 
{# Include FontAwesome; required for icon display #}
<link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.css">

{# Include Bootstrap 4 and jQuery #}
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>

{# Django Tempus Dominus assets are included in `{{ form.media }}` #}
{% endblock %}


{% block style %} 
:root {
	--ck-sample-editor-min-height: 400px;
}
{% endblock %}


{% block menu %} 
    <!-- <button for="submit" value="Submit">Submit</button> -->
{% endblock %}

{% block content %}
<!-- <h1 class="maintitle">New post {{user}}</h1> -->

<form method="POST" class="post-form" enctype="multipart/form-data">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-8">
                {{form.media }}
                <div class="title mb-2 ">
                    <!-- <label class="mt-2 labeltext" for="title" class="form-label">{{form.title.label}}:</label> -->
                    <div class="">
                        {{ form.title }}
                    </div>
                </div>
                <div class="body mb-2 ">
                    <!-- <label class="mt-2 labeltext" for="body" class="form-label">{{form.body.label}}:</label> -->
                    <div class="" style="padding: 0px;">
                        {{ form.body }}
                    </div>
                </div>
                {% csrf_token %}
                {{media}}
                <br>
            </div>
            <div class="col-md-4 border">
                <div class="publish mt-2">
                    <button name="submit" type="submit" formnovalidate="formnovalidate" class="save btn publish__b bg-red-lite">Publish</button>
                </div>
                <div class="tags bg-aqua-lite">
                    <label class="mt-2 tag_label d-flex justify-content-center" for="tags" class="form-label">Please provie some tags</label>
                    <div class="">
                        {{ form.tags }}
            
                    </div>
                </div>
                <div class="cover bg-aqua-lite ">
                    <label class="mt-2 tag_label d-flex justify-content-center" for="cover" class="form-label">{{form.cover.label}}:</label>
                    <div class="">
                        <label id="remove" class="uploadcover" for="id_cover">
                            <img class="blogcoverimage" width="100%" id="myImg" src='' alt="Upload" />
                        </label>
                        {{ form.cover }}
                    </div>
                </div>
            </div>
        </div>
    </div>

</form>    



{% endblock %}

{% block footer %} 

{% endblock %}

{% block script %} 
<script  src="{% static 'js/ckeditor.js' %}"></script>
<script src="{% static 'js/ckeditor.config.js' %}"></script>

{% endblock %}

{% block domready %}
$(function () {
$(":file").change(function () {
if (this.files && this.files[0]) {
var reader = new FileReader();
reader.onload = imageIsLoaded;
reader.readAsDataURL(this.files[0]);
}
});
});

function imageIsLoaded(e) {
$('#myImg').attr('src', e.target.result);
<!-- $('#remove').remove(); -->
};


{% endblock %}

